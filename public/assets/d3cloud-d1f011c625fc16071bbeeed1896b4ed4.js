function drawCloud(){function t(t){d3.select("div#d3Cloud").append("svg").attr("width",window.innerWidth).attr("height",.75*window.innerHeight).append("g").attr("transform","translate("+window.innerWidth/2+", "+.75*window.innerHeight/2+")").selectAll("text").data(t).enter().append("text").style("font-size",function(t){return t.size+"px"}).style("font-family","Impact").style("fill",function(t,n){return r(n)}).attr("text-anchor","middle").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.text}).on("click",function(t){$.ajax({url:"/word/"+t.text,success:function(n){callModalFromCloud(n,t.text)}})})}var n=[];for(var e in gon.tweets)n.push([e,gon.tweets[e]]);n=n.map(function(t){return{text:t[0],size:10*t[1]}});var r=d3.scale.category20();d3.layout.cloud().size([1900,600]).words(n).padding(5).timeInterval(10).rotate(function(){return 90*~~(2*Math.random())}).font("Impact").fontSize(function(t){return t.size}).on("end",t).start()}